---
title: Computer Network Note
date: 2021-04-02 14:58:25
updated: 2020-04-02 14:58:25
categories: [tech]
---

### 计算机网络

```
-面试常见问答题
```

#### Get Start

##### 1.ARP

地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议。Z主机发送信息时将包含目标IP地址的ARP请求广播到局域网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。

##### 2.ICMP

控制报文协议，控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。

##### 3.TCP的拥塞控制

 拥塞控制：

防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不致过载。拥塞控制所要做的都有一个前提：网络能够承受现有的网络负荷。拥塞控制是一个全局性的过程，涉及到所有的主机、路由器，以及与降低网络传输性能有关的所有因素。

慢开始：

慢开始的“慢”并不是指cwnd的增长速率慢，而是指在TCP开始发送报文段时先设置cwnd=1，使得发送方在开始时只发送一个报文段（目的是试探一下网络的拥塞情况），然后再逐渐增大cwnd（拥塞控制窗口congestion window）。

拥塞避免阶段: 

 当 cwnd > ssthresh 时,停止使用慢开始算法而改用拥塞避免算法。让拥塞窗口cwnd缓慢地增大，即每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1，而不是加倍。

![20140509221015859](/images/慢启动拥塞控制.jpg)

快重传方法：

快重传算法首先要求接收方每收到一个失序的报文段后就立即发出重复确认（为的是使发送方及早知道有报文段没有到达对方）而不要等到自己发送数据时才进行捎带确认。当发送方接收到三个确认请求后，直接开始重传。

快恢复算法：

当发送方连续收到三个重复确认，就执行“乘法减小”算法，把慢开始门限ssthresh减半。这是为了预防网络发生拥塞。请注意：接下去不执行慢开始算法。

由于发送方现在认为网络很可能没有发生拥塞，因此与慢开始不同之处是现在不执行慢开始算法（即拥塞窗口cwnd现在不设置为1），而是把cwnd值设置为慢开始门限ssthresh减半后的数值，然后开始执行拥塞避免算法（“加法增大”），使拥塞窗口缓慢地线性增大。

![20140509221048265](/images/快恢复拥塞控制.jpg)

##### 4.TCP的流量控制

如果发送方把数据发送得过快，接收方可能会来不及接收，这就会造成数据的丢失。所谓**流量控制**就是让发送方的发送速率不要太快，要让接收方来得及接收。

   利用滑动窗口机制可以很方便地在TCP连接上实现对发送方的流量控制。由接收方告诉发送方一个rwnd（receive window）接收窗口的大小。

##### 5.经典问题 从浏览器输入一个URL到显示网页过程的实现

1. DNS解析

2. TCP连接

3. 发送HTTP请求

4.  服务器处理请求并返回HTTP报文

5. 浏览器解析渲染页面

6.  连接结束

   ## 1.DNS解析  

    DNS解析的过程就是寻找那台机器上有你需要资源的过程。当你在浏览器输入一个地址，如：http://www.baidu.com，其实不是百度的网站真正意义上的地址。互联网上每一台计算机的位移标识是它的ip地址，但ip地址并不方便记忆。网址到ip地址的转换过程就是DNS解析。它实际上充当了一个翻译的功能，实现了网址到ip地址的转换，将域名地址解析为ip地址

   **DNS 存在这多级缓存**

   从离浏览器的距离排序的话，有以下几种：

   - 浏览器缓存
   - 系统缓存
   - 路由器缓存
   - IPS服务器缓存
   - 根域名服务器缓存
   - 顶级域名服务器缓存
   - 主域名服务器缓存

   找到了就建立tcp连接

   ## 2.TCP连接

   TCP连接：TCP三次握手

   - 第一次握手，由浏览器发起，告诉服务器，我要发送请求了。
   - 第二次握手，由服务器发起，告诉浏览器我准备好了，你发送吧。还会告诉浏览器我收到了你的第一次握手请求，双方每次握手都会重复这样的应答，从而确保自己既能收到请求也能发送请求。
   - 第三次握手，由浏览器发送，告诉服务器，我马上发送了，准备接受吧。

   ## 3.发送HTTP请求

   发送http协议的通信内容，即请求报文。

   ## 4. 服务器处理请求并返回HTTP报文

   ## 5.浏览器解析渲染页面

   - 遇见HTML标记，浏览器调用HTML解析器解析成Token,并构建成dom树
   - 遇见style/link标记，浏览调用css解析器
   - 遇见script标记，调用javascript解析器，处理script代码（绑定时间，修改dom树/css dom树）
   - 根据渲染树计算布局，计算每个节点的几何信息（布局）
   - 将各个节点颜色绘制到屏幕上（渲染）

   注意：

   这5个步骤不一定按照顺序执行，如果dom树或cssdom树被修改了，可能会执行多次布局和渲染

   往往实际页面中，这些步骤都会执行多次。

   ## 6.连接结束  断开连接： TCP的四次挥手

   - 第一次挥手，浏览器发起，发送给服务器，我东西发完了（请求报文），你准备关闭吧。
   - 第二次挥手，服务器发起，告诉浏览器，我东西接受完了（请求报文），我准备关闭了，你也准备吧
   - 第三次挥手，服务器发起，告诉浏览器，我东西发送完了（响应报文），你准备关闭吧。
   - 第四次挥手，浏览器发起，告诉服务器，我东西接受完了，我准备关闭了额，你也准备关闭吧。

